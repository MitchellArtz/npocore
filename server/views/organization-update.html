<!DOCTYPE html>
<html lang="en" dir="ltr">
  <head>
    <meta charset="utf-8">
    <title>NPO Core - Update your Nonprofit Organization's Profile!</title>

    <%- blockElements[0] %>
  </head>
  <body>
    <nav class="navbar navbar-expand-md navbar-light">
      <div class="container">
        <a class="navbar-brand" href="/">
          <img src="/static/img/npocore.png" alt="NPO Core Logo">
        </a>
        <button class="navbar-toggler" data-toggle="collapse" data-target="#navbar-target">
          <span class="navbar-toggler-icon"></span>
        </button>
        <div class="collapse navbar-collapse" id="navbar-target">
          <ul class="navbar-nav ml-auto">
            <li class="nav-item">
              <a class="nav-link" href="/">Home</a>
            </li>
            <li class="nav-item">
              <a class="nav-link" href="/contact">Contact</a>
            </li>
            <li class="nav-item">
              <a class="nav-link" href="/organizations">Organizations</a>
            </li>
            <li class="nav-item">
              <a class="nav-link" href="/opportunities">Opportunities</a>
            </li>
            <% if (cookies.organization) { %>
              <li class="nav-item dropdown">
                <a class="nav-link" href="#" id="navbarDropdown" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                  <% if (cookies.organization.logo) { %>
                    <div class="image-cropper">
                      <img class="nav-logo" src="<%= s3Link %><%= cookies.organization.logo %>" alt="">
                    </div>
                  <% } else { %>
                    <div class="image-cropper">
                      <img class="nav-logo" src="/static/img/no-logo.png" alt="">
                    </div>
                  <% } %>
                </a>
                <div class="dropdown-menu" aria-labelledby="navbarDropdown">
                  <a class="dropdown-item" href="/@<%= cookies.organization.idName %>">View my organization</a>
                  <div class="dropdown-divider"></div>
                  <a class="dropdown-item" href="/logout">Logout</a>
                </div>
              </li>
            <% } else { %>
              <li class="nav-item">
                <a class="btn btn-info ml-2" href="/login">Login/Register</a>
              </li>
            <% } %>
          </ul>
        </div>
      </div>
    </nav>

    <div class="container">
      <div class="form-container">
        <h1>Update <%= organization.name %></h1>

        <form enctype="multipart/form-data" method="post">
          <label>Organization Name:</label><br>
          <input name="name" class="form-control" type="text" value="<%= organization.name %>" required />
          <br>
          <label>Organization Email:</label><br>
          <input name="email" class="form-control" type="email" value="<%= organization.email %>" required />
          <br>
          <label>Organization Description:</label><br>
          <textarea name="description" class="form-control" rows="5" required><%= organization.description %></textarea>
          <br>
          <label>Organization Logo:</label>
          <input name="logo" type="file" accept='image/*'>
          <br>
          <label>Organization Location:</label><br>
          <input name="location" id="autocomplete" class="form-control" type="text" value="<%= organization.location.name %>" />
          <br>
          <label class="mt-2">Target Audience:</label>
          <br>
          <select name="targetAudience" required>
            <% if (organization.targetAudience == "Everyone") { %>
              <option value="Everyone" selected>Everyone</option>
            <% } else { %>
              <option value="Everyone">Everyone</option>
            <% } %>
            <% if (organization.targetAudience == "Kids") { %>
              <option value="Kids" selected>Kids</option>
            <% } else { %>
              <option value="Kids">Kids</option>
            <% } %>
            <% if (organization.targetAudience == "Teens") { %>
              <option value="Teens" selected>Teens</option>
            <% } else { %>
              <option value="Teens">Teens</option>
            <% } %>
            <% if (organization.targetAudience == "Adults") { %>
              <option value="Adults" selected>Adults</option>
            <% } else { %>
              <option value="Adults">Adults</option>
            <% } %>
            <% if (organization.targetAudience == "Seniors") { %>
              <option value="Seniors" selected>Seniors</option>
            <% } else { %>
              <option value="Seniors">Seniors</option>
            <% } %>
            <% if (organization.targetAudience == "Groups") { %>
              <option value="Groups" selected>Groups</option>
            <% } else { %>
              <option value="Groups">Groups</option>
            <% } %>
          </select>
          <br>
          <label class="mt-2">Cause:</label><br>
          <select name="cause" required>
            <% if (organization.cause == "Advocacy and Human Rights") { %>
              <option value="Advocacy and Human Rights" selected>Advocacy and Human Rights</option>
            <% } else { %>
              <option value="Advocacy and Human Rights">Advocacy and Human Rights</option>
            <% } %>
            <% if (organization.cause == "Animal Welfare") { %>
              <option value="Animal Welfare" selected>Animal Welfare</option>
            <% } else { %>
              <option value="Animal Welfare">Animal Welfare</option>
            <% } %>
            <% if (organization.cause == "Arts and Culture") { %>
              <option value="Arts and Culture" selected>Arts and Culture</option>
            <% } else { %>
              <option value="Arts and Culture">Arts and Culture</option>
            <% } %>
            <% if (organization.cause == "Children and Youth") { %>
              <option value="Children and Youth" selected>Children and Youth</option>
            <% } else { %>
              <option value="Children and Youth">Children and Youth</option>
            <% } %>
            <% if (organization.cause == "Civil Rights and Social Action") { %>
              <option value="Civil Rights and Social Action" selected>Civil Rights and Social Action</option>
            <% } else { %>
              <option value="Civil Rights and Social Action">Civil Rights and Social Action</option>
            <% } %>
            <% if (organization.cause == "Crisis Support") { %>
              <option value="Crisis Support" selected>Crisis Support</option>
            <% } else { %>
              <option value="Crisis Support">Crisis Support</option>
            <% } %>
            <% if (organization.cause == "Disaster Relief") { %>
              <option value="Disaster Relief" selected>Disaster Relief</option>
            <% } else { %>
              <option value="Disaster Relief">Disaster Relief</option>
            <% } %>
            <% if (organization.cause == "Emergency and Safety") { %>
              <option value="Emergency and Safety" selected>Emergency and Safety</option>
            <% } else { %>
              <option value="Emergency and Safety">Emergency and Safety</option>
            <% } %>
            <% if (organization.cause == "Education") { %>
              <option value="Education" selected>Education</option>
            <% } else { %>
              <option value="Education">Education</option>
            <% } %>
            <% if (organization.cause == "Environment") { %>
              <option value="Environment" selected>Environment</option>
            <% } else { %>
              <option value="Environment">Environment</option>
            <% } %>
            <% if (organization.cause == "Female Empowerment") { %>
              <option value="Female Empowerment" selected>Female Empowerment</option>
            <% } else { %>
              <option value="Female Empowerment">Female Empowerment</option>
            <% } %>
            <% if (organization.cause == "Health") { %>
              <option value="Health" selected>Health</option>
            <% } else { %>
              <option value="Health">Health</option>
            <% } %>
            <% if (organization.cause == "Homeless and Housing") { %>
              <option value="Homeless and Housing" selected>Homeless and Housing</option>
            <% } else { %>
              <option value="Homeless and Housing">Homeless and Housing</option>
            <% } %>
            <% if (organization.cause == "Politics") { %>
              <option value="Politics" selected>Politics</option>
            <% } else { %>
              <option value="Politics">Politics</option>
            <% } %>
            <% if (organization.cause == "LGBTQ+") { %>
              <option value="LGBTQ+" selected>LGBTQ+</option>
            <% } else { %>
              <option value="LGBTQ+">LGBTQ+</option>
            <% } %>
            <% if (organization.cause == "Race and Ethnicity") { %>
              <option value="Race and Ethnicity" selected>Race and Ethnicity</option>
            <% } else { %>
              <option value="Race and Ethnicity">Race and Ethnicity</option>
            <% } %>
            <% if (organization.cause == "Povery Alleviation") { %>
              <option value="Poverty Alleviation" selected>Poverty Alleviation</option>
            <% } else { %>
              <option value="Poverty Alleviation">Poverty Alleviation</option>
            <% } %>
            <% if (organization.cause == "Science and Technology") { %>
              <option value="Science and Technology" selected>Science and Technology</option>
            <% } else { %>
              <option value="Science and Technology">Science and Technology</option>
            <% } %>
            <% if (organization.cause == "Social Services") { %>
              <option value="Social Services" selected>Social Services</option>
            <% } else { %>
              <option value="Social Services">Social Services</option>
            <% } %>
            <% if (organization.cause == "Veterans and Military Families") { %>
              <option value="Veterans and Military Families" selected>Veterans and Military Families</option>
            <% } else { %>
              <option value="Veterans and Military Families">Veterans and Military Families</option>
            <% } %>
          </select>
          <br>
          <label class="mt-4">Looking for:</label><br>
          <div class="looking-for-checkboxes">
            <% if (organization.interests) { %>
              <% if (organization.interests.includes("Members")) { %>
                <div><input name="interests" class="interest-checkbox" type="checkbox" value="Members" checked /> <label>Members</label></div>
              <% } else { %>
                <div><input name="interests" class="interest-checkbox" type="checkbox" value="Members" /> <label>Members</label></div>
              <% } %>
              <% if (organization.interests.includes("Partnerships")) { %>
                <div><input name="interests" class="interest-checkbox" type="checkbox" value="Partnerships" checked /> <label>Partnerships</label></div>
              <% } else { %>
                <div><input name="interests" class="interest-checkbox" type="checkbox" value="Partnerships" /> <label>Partnerships</label></div>
              <% } %>
              <% if (organization.interests.includes("Sponsors")) { %>
                <div><input name="interests" class="interest-checkbox" type="checkbox" value="Sponsors" checked /> <label>Sponsors</label></div>
              <% } else { %>
                <div><input name="interests" class="interest-checkbox" type="checkbox" value="Sponsors" /> <label>Sponsors</label></div>
              <% } %>
              <% if (organization.interests.includes("Clients")) { %>
                <div><input name="interests" class="interest-checkbox" type="checkbox" value="Clients" checked /> <label>Clients</label></div>
              <% } else { %>
                <div><input name="interests" class="interest-checkbox" type="checkbox" value="Clients" /> <label>Clients</label></div>
              <% } %>
              <% if (organization.interests.includes("Opportunities")) { %>
                <div><input name="interests" class="interest-checkbox" type="checkbox" value="Opportunities" checked /> <label>Opportunities</label></div>
              <% } else { %>
                <div><input name="interests" class="interest-checkbox" type="checkbox" value="Opportunities" /> <label>Opportunities</label></div>
              <% } %>
            <% } else { %>
              <div><input name="interests" class="interest-checkbox" type="checkbox" value="Members" /> <label>Members</label></div>
              <div><input name="interests" class="interest-checkbox" type="checkbox" value="Partnerships" /> <label>Partnerships</label></div>
              <div><input name="interests" class="interest-checkbox" type="checkbox" value="Sponsors" /> <label>Sponsors</label></div>
              <div><input name="interests" class="interest-checkbox" type="checkbox" value="Clients" /> <label>Clients</label></div>
              <div><input name="interests" class="interest-checkbox" type="checkbox" value="Opportunities" /> <label>Opportunities</label></div>
            <% } %>
          </div>

          <br>
          <label>Organization Links:</label><br>
          <% if (organization.links) { %>
            <% if (organization.links.instagram) { %>
              <input name="instagram" class="form-control mb-2" type="url" placeholder="Instagram" value="<%= organization.links.instagram %>" />
            <% } else { %>
              <input name="instagram" class="form-control mb-2" type="url" placeholder="Instagram" />
            <% } %>
            <% if (organization.links.facebook) { %>
              <input name="facebook" class="form-control mb-2" type="url" placeholder="Facebook" value="<%= organization.links.facebook %>" />
            <% } else { %>
              <input name="facebook" class="form-control mb-2" type="url" placeholder="Facebook" />
            <% } %>
            <% if (organization.links.twitter) { %>
              <input name="twitter" class="form-control mb-2" type="url" placeholder="Twitter" value="<%= organization.links.twitter %>" />
            <% } else { %>
              <input name="twitter" class="form-control mb-2" type="url" placeholder="Twitter" />
            <% } %>
            <% if (organization.links.linkedin) { %>
              <input name="linkedin" class="form-control mb-2" type="url" placeholder="LinkedIn" value="<%= organization.links.linkedin %>" />
            <% } else { %>
              <input name="linkedin" class="form-control mb-2" type="url" placeholder="LinkedIn" />
            <% } %>
            <% if (organization.links.website) { %>
              <input name="website" class="form-control mb-2" type="url" placeholder="Website" value="<%= organization.links.website %>" />
            <% } else { %>
              <input name="website" class="form-control mb-2" type="url" placeholder="Website" />
            <% } %>
          <% } else { %>
            <input name="instagram" class="form-control mb-2" type="url" placeholder="Instagram" />
            <input name="facebook" class="form-control mb-2" type="url" placeholder="Facebook" />
            <input name="twitter" class="form-control mb-2" type="url" placeholder="Twitter" />
            <input name="linkedin" class="form-control mb-2" type="url" placeholder="LinkedIn" />
            <input name="website" class="form-control mb-2" type="url" placeholder="Website" />
          <% } %>
          <br>

          <input class="solid-cta-button w-100" type="submit" value="Update!">
        </form>
      </div>
    </div>
  </body>
  <script type="text/javascript" src="https://maps.googleapis.com/maps/api/js?key=<%= googleApiKey %>&libraries=places"></script>
  <script>
    var input = document.getElementById('autocomplete');
    var autocomplete = new google.maps.places.Autocomplete(input);

    const error = <%- JSON.stringify(error) %>;
    if (error) {
      alertify.error(error);
    }
  </script>
</html>
